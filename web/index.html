<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>DuHast Airlines</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/tokens.css" />
  <link rel="stylesheet" href="css/layout.css" />
  <link rel="stylesheet" href="css/loading.css" />
  <link rel="stylesheet" href="css/home.css" />
  <link rel="stylesheet" href="css/lock.css" />
  <link rel="stylesheet" href="css/detail.css" />
  <link rel="stylesheet" href="css/options.css" />
  <link rel="stylesheet" href="css/chat.css" />
  <link rel="stylesheet" href="css/booking.css" />
  <link rel="stylesheet" href="css/overlays.css" />
  <link rel="stylesheet" href="css/tabs.css" />
  <link rel="stylesheet" href="css/dark.css" />
</head>
<body>
  <style>
    .dashboard-link {
      position: absolute;
      top: 18px;
      right: 24px;
      color: #b8860b;
      text-decoration: none;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.95rem;
      font-weight: 500;
      z-index: 100;
    }
    .dashboard-link:hover { text-decoration: underline; }
    @media (max-width: 600px) {
      .dashboard-link { display: none; }
    }
  </style>
  <header>
    <h1><i data-lucide="plane" aria-hidden="true"></i> DuHast Disruption Management</h1>
    <a href="dashboard.html" class="dashboard-link">Dashboard View →</a>
    <div style="display: flex; align-items: center; gap: 16px;">
      <span class="status" id="statusText">Ready</span>
    </div>
  </header>

  <div class="app-shell">

    <!-- ══════ Screen 1: Lock Screen ══════ -->
    <div class="screen active" id="screenLock">
      <div style="flex:1; display:flex; flex-direction:column;">
        <div style="padding-top: 20px;">
          <div class="lock-time" id="lockTime">9:41</div>
          <div class="lock-date" id="lockDate">Tuesday, February 25</div>
        </div>
        <div class="lock-notification-area">
          <div class="lock-notif-card" id="lockNotifCard" aria-label="Flight notification — tap to view details">
            <div class="lock-notif-header">
              <div class="lock-notif-icon"><i data-lucide="plane" aria-hidden="true"></i></div>
              <div class="lock-notif-app">DuHast Airlines</div>
              <div class="lock-notif-time">now</div>
            </div>
            <div class="lock-notif-title" id="lockNotifTitle">Flight Update</div>
            <div class="lock-notif-body" id="lockNotifBody">Your flight status has changed.</div>
          </div>
        </div>
        <div class="lock-bottom">
          <button class="lock-cta-btn" id="btnDisruption" aria-label="Simulate flight disruption">
            Simulate Disruption
          </button>
          <div class="lock-slide-hint">swipe up to open</div>
        </div>
      </div>
    </div>

    <!-- ══════ Screen 1.5: App Loading ══════ -->
    <div class="screen" id="screenLoading" aria-live="polite">
      <div class="loading-wrap">
        <div class="loading-brand">DuHast Airlines</div>
        <div class="loading-sub">Launching your AI Concierge</div>
      </div>
    </div>

    <!-- ══════ Screen 1.6: Home Landing ══════ -->
    <div class="screen" id="screenHome">
      <div class="app-home" id="appHome">
        <div class="home-topbar">
          <div class="home-logo">DuHast</div>
          <div class="home-actions">
            <div class="home-icon-btn"><i data-lucide="message-circle" aria-hidden="true"></i></div>
            <div class="home-icon-btn"><i data-lucide="bell" aria-hidden="true"></i></div>
          </div>
        </div>

        <div class="home-card member-card">
          <div class="label">Traveler</div>
          <div class="title" id="homePassengerName">Alice Anderson</div>
          <div class="desc" id="homePassengerTier">DuHast Signature Platinum • Priority support active</div>
        </div>

        <div class="home-card trip-card">
          <div class="trip-header">
            <div class="trip-flight" id="homeTripFlight">UA 891</div>
            <div class="trip-state cancelled" id="homeTripStatus">CANCELLED</div>
          </div>
          <div class="trip-body">
            <div class="trip-time" id="homeTripTime">Departs Fri, 6:00 AM</div>
            <div class="trip-route" id="homeTripRoute">FRA → JFK</div>
          </div>
          <div class="trip-footer">
            <div class="trip-meta">
              <div><span class="label">Departs</span><span id="homeTripDeparts">6:00 AM</span></div>
              <div><span class="label">Gate</span><span id="homeTripGate">--</span></div>
              <div><span class="label">Terminal</span><span id="homeTripTerminal">--</span></div>
              <div><span class="label">Seat</span><span id="homeTripSeat">3A</span></div>
            </div>
            <div class="trip-btn" id="homeViewUpdate">View Update</div>
          </div>
        </div>

        <div class="home-card">
          <div class="label">Travel Advisory</div>
          <div class="title">Stay informed before departure</div>
          <div class="desc" id="homeTripCause">Severe weather at FRA</div>
        </div>

        <div class="home-actions-row">
          <button class="ios-btn ios-btn-primary" id="homeOpenChat">Chat with AI Concierge</button>
        </div>
      </div>
    </div>

    <!-- ══════ Screen 2: Notification Detail ══════ -->
    <div class="screen" id="screenDetail">
      <div class="ios-nav-bar">
        <button class="nav-back" id="detailBack" aria-label="Go back">‹ Back</button>
        <span class="nav-title" id="navTitleDetail">Flight Update</span>
      </div>
      <div class="detail-scroll" id="detailScroll">
        <div class="alert-banner" id="alertBanner">
          <span class="alert-emoji"><i data-lucide="triangle-alert" aria-hidden="true"></i></span>
          <div class="alert-content">
            <div class="alert-type" id="alertType">CANCELLATION</div>
            <div class="alert-cause" id="alertCause">Loading...</div>
          </div>
        </div>
        <div class="flight-card" id="flightCard">
          <div class="flight-number" id="flightNumber">UA891</div>
          <div class="flight-route">
            <span class="airport-code" id="originCode">FRA</span>
            <div class="route-line">
              <div class="line"></div>
              <span class="plane-icon"><i data-lucide="plane" aria-hidden="true"></i></span>
              <div class="line"></div>
            </div>
            <span class="airport-code" id="destCode">JFK</span>
          </div>
          <div class="flight-meta">
            <span id="flightDate">2026-02-25</span>
            <span class="status-pill cancelled" id="flightStatus">CANCELLED</span>
          </div>
        </div>
        <div class="passenger-card" id="passengerCard">
          <div class="passenger-avatar" id="passengerAvatar">AA</div>
          <div class="passenger-info">
            <div class="passenger-name" id="passengerName">Alice Anderson</div>
            <div class="passenger-pnr" id="passengerPnr">PAX-0001</div>
          </div>
          <span class="tier-badge Platinum" id="passengerTier">Platinum</span>
        </div>
        <div class="notif-body-card" id="notifBodyCard">Loading notification...</div>
        <div class="detail-cta">
          <button class="ios-btn ios-btn-primary" id="ctaViewOptions" aria-label="View rebooking options">View Rebooking Options</button>
          <button class="ios-btn ios-btn-secondary" id="ctaChatAssistant" aria-label="Chat with assistant">Chat with Assistant</button>
        </div>
      </div>
    </div>

    <!-- ══════ Screen 3: Trips (Tab) ══════ -->
    <div class="screen" id="screenOptions">
      <div class="ios-nav-bar">
        <span class="nav-title" id="navTitleOptions">DuHast</span>
      </div>
      <div class="options-header">
        <div class="options-large-title">My Trips</div>
      </div>
      
      <!-- Current Trip Card -->
      <div class="current-trip-container" id="currentTripContainer">
        <div class="current-trip-card" id="currentTripCard">
          <div class="trip-header">
            <span class="trip-label">Current Trip</span>
            <span class="trip-status-badge" id="tripStatusBadge">Scheduled</span>
          </div>
          <div class="trip-flight-number" id="tripFlightNumber">UA891</div>
          <div class="trip-route">
            <div class="trip-airport">
              <div class="trip-airport-code" id="tripOriginCode">FRA</div>
              <div class="trip-airport-name">Frankfurt</div>
            </div>
            <div class="trip-arrow">→</div>
            <div class="trip-airport">
              <div class="trip-airport-code" id="tripDestCode">JFK</div>
              <div class="trip-airport-name">New York</div>
            </div>
          </div>
          <div class="trip-date" id="tripDate">Feb 25, 2026</div>
          <button class="trip-action-btn hidden" id="btnViewRebookingOptions">View Rebooking Options</button>
        </div>
      </div>
      
      <!-- Rebooking Options (hidden by default) -->
      <div class="rebooking-section hidden" id="rebookingSection">
        <div class="rebooking-header">
          <div class="rebooking-title">Rebooking Options</div>
          <button class="rebooking-close" id="btnCloseRebooking">✕</button>
        </div>
        <div class="filter-pills">
          <button class="filter-pill active" id="sortTime" aria-label="Sort by earliest">Earliest</button>
          <button class="filter-pill" id="sortCost" aria-label="Sort by lowest cost">Lowest Cost</button>
          <button class="filter-pill" id="filterRecommended" aria-label="Show recommended only">Recommended</button>
        </div>
        <div class="options-scroll" id="optionsList">
          <div class="options-no-items">No rebooking options available.</div>
        </div>
        <div class="options-confirm-bar">
          <button class="ios-btn ios-btn-success" id="btnConfirm" disabled aria-label="Confirm selection">Confirm Selection</button>
        </div>
      </div>
    </div>

    <!-- ══════ Screen 4: Chat (Tab) ══════ -->
    <div class="screen" id="screenChat">
      <div class="ios-nav-bar">
        <span class="nav-title">AI Assistant<span class="chat-nav-sentiment NEUTRAL" id="sentimentDot"></span></span>
        <div class="nav-right">
          <button class="nav-icon-btn" id="btnVoiceAgent" aria-label="Call Agent" title="Call Agent"><i data-lucide="phone" aria-hidden="true"></i></button>
          <button class="nav-back" id="btnEscalate" style="position:static;transform:none;color:var(--danger);font-size:14px;font-weight:600;" aria-label="Escalate to agent" disabled>Escalate</button>
        </div>
      </div>
      <div class="auto-escalation-banner" id="autoEscalationAlert">
        <div class="pulse-dot"></div>
        <span class="escalation-text" id="autoEscalationDetail">Routing to live agent...</span>
      </div>
      <div class="chat-messages" id="chatMessages">
        <!-- Messages will appear here -->
      </div>
      <div class="chat-input-area">
        <div class="chat-input-wrapper">
          <input type="text" id="chatInput" placeholder="Ask about your options..." disabled aria-label="Chat message input" />
        </div>
        <button class="chat-send-btn" id="btnSend" disabled aria-label="Send message">↑</button>
      </div>
    </div>

    <!-- ══════ Screen 5: Booking Confirmation ══════ -->
    <div class="screen" id="screenBooking">
      <div class="ios-nav-bar">
        <span class="nav-title">Confirmation</span>
      </div>
      <div class="booking-scroll">
        <div class="booking-checkmark"><i data-lucide="check" aria-hidden="true"></i></div>
        <div class="booking-success-text">Booking Confirmed</div>
        <div class="pnr-card">
          <div class="pnr-label">Confirmation Code</div>
          <div class="pnr-code" id="pnrCode"></div>
        </div>
        <div class="itinerary-card" id="bookingItinerary">
          <div class="itin-passenger">
            <span id="itinPassenger">Alice Anderson</span>
            <span class="tier-badge Platinum" id="itinTier">Platinum</span>
          </div>
          <div class="itin-route">
            <span class="itin-airport" id="itinOrigin">FRA</span>
            <div class="route-line" style="flex:1;display:flex;align-items:center;gap:6px;">
              <div class="line" style="flex:1;height:1px;background:var(--line)"></div>
              <span style="font-size:16px;color:var(--primary)"><i data-lucide="plane" aria-hidden="true"></i></span>
              <div class="line" style="flex:1;height:1px;background:var(--line)"></div>
            </div>
            <span class="itin-airport" id="itinDest">JFK</span>
          </div>
          <div class="itin-meta" id="itinMeta"></div>
        </div>
        <div class="offline-note-card" id="offlineNote">
          <span><i data-lucide="info" aria-hidden="true"></i></span>
          <span id="offlineNoteText"></span>
        </div>
        <button class="wallet-btn" aria-label="Add to Apple Wallet"><i data-lucide="ticket" aria-hidden="true"></i> Add to Wallet</button>
        <button class="ios-btn ios-btn-primary" id="btnDone" aria-label="Done — reset app">Done</button>
      </div>
    </div>

    <!-- ══════ Escalation Modal Sheet ══════ -->
    <div class="escalation-overlay" id="escalationOverlay">
      <div class="escalation-sheet">
        <div class="sheet-handle"></div>
        <div class="sheet-header">
          <div class="pulse-dot-blue"></div>
          <span class="sheet-title">Connecting to Agent</span>
        </div>
        <div class="sheet-body" id="escalationBody">
          We're connecting you with a live agent. Your case details have been shared so you won't need to repeat yourself.
        </div>
        <div class="sheet-wait">Est. wait: &lt; 2 minutes</div>
        <button class="ios-btn ios-btn-secondary" id="btnDismissEscalation" aria-label="Dismiss escalation">Dismiss</button>
      </div>
    </div>

    <!-- ══════ Metrics Drawer (Hidden Dev View) ══════ -->
    <div class="metrics-drawer-overlay" id="metricsOverlay">
      <div class="metrics-drawer">
        <div class="sheet-handle"></div>
        <div class="metrics-drawer-title"><i data-lucide="chart-column" aria-hidden="true"></i> Developer Metrics</div>

        <div class="metrics-section" id="metricsManifestSection" style="display:none;">
          <div class="metrics-section-title">Manifest Summary</div>
          <div class="manifest-stats">
            <div class="manifest-stat"><div class="manifest-stat-val" id="mTotal">0</div><div class="manifest-stat-label">Total Passengers</div></div>
            <div class="manifest-stat"><div class="manifest-stat-val" id="mPlatinum">0</div><div class="manifest-stat-label">Platinum</div></div>
            <div class="manifest-stat"><div class="manifest-stat-val" id="mGold">0</div><div class="manifest-stat-label">Gold</div></div>
            <div class="manifest-stat"><div class="manifest-stat-val" id="mConnRisk">0</div><div class="manifest-stat-label">Connection Risk</div></div>
            <div class="manifest-stat"><div class="manifest-stat-val" id="mProactive">0</div><div class="manifest-stat-label">Proactive Eligible</div></div>
          </div>
        </div>

        <div class="metrics-section" id="metricsSentimentSection" style="display:none;">
          <div class="metrics-section-title">Sentiment</div>
          <div id="sentimentDetail" style="padding:6px 0;color:#E5E5EA;"></div>
        </div>

        <div class="metrics-section">
          <div class="metrics-section-title">Event Log</div>
          <div id="metricsLog"></div>
        </div>


      </div>
    </div>

    <!-- ══════ Bottom Tab Bar ══════ -->
    <nav class="tab-bar" id="tabBar" role="navigation" aria-label="Main navigation">
      <button class="tab-item active" data-tab="notifications" aria-label="Updates tab">
        <span class="tab-icon"><i data-lucide="bell" aria-hidden="true"></i><span class="tab-dot" id="tabDotNotif"></span></span>
        <span class="tab-label">Updates</span>
      </button>
      <button class="tab-item" data-tab="chat" aria-label="Chat tab">
        <span class="tab-icon"><i data-lucide="message-circle" aria-hidden="true"></i><span class="tab-badge" id="tabBadgeChat"></span></span>
        <span class="tab-label">Chat</span>
      </button>
      <button class="tab-item" id="btnVoiceTab" aria-label="Call agent">
        <span class="tab-icon"><i data-lucide="phone" aria-hidden="true"></i></span>
        <span class="tab-label">Call</span>
      </button>
      <button class="tab-item" data-tab="options" aria-label="Flights tab">
        <span class="tab-icon"><i data-lucide="plane" aria-hidden="true"></i><span class="tab-badge" id="tabBadgeOptions"></span></span>
        <span class="tab-label">Flights</span>
      </button>
    </nav>

  </div>

  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="js/config.js"></script>
  <script src="js/state.js"></script>
  <script src="js/api.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/options.js"></script>
  <script src="js/navigation.js"></script>
  <script src="js/actions.js"></script>
  <script src="js/init.js"></script>
</body>
</html>
